<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
	<meta name="description" content="童话说，一个关于Web前端的原创技术博客，不定期发布Web前端及其相关技术的博文">
	<meta name="keywords" content="tonghuashuo,github,前端,html,html5,css,css3,javascript,js,jquery,安卓,android,java,童话,童话说,华心童">
	<title>UserAgent - THS Lab</title>
	<link rel="stylesheet" href="../../css/index.css" />
	<link rel="stylesheet" href="../../css/lab.css">

</head>
<body>
    <div id="mf_content">
        <h1>UserAgent</h1>
        <hr/>
        <p>Browser: <span id="browser"></span></p>
        <p>OS: <span id="os"></span></p>
        <br/>
        <p>UA: <span id="ua"></span></p>
        <p>Platform: <span id="platform"></span></p>
        <p id="error"></p>
        <hr/>
        <a href="../../lab.html" class="back">&laquo; Back</a>
    </div>
    
	<script src="../../js/index.js"></script>
	<script>
	(function() {
		if(navigator.userAgent && navigator.platform) {
			var UA = window.navigator.userAgent;
			var platform = window.navigator.platform;
			
			document.getElementById("browser").innerHTML = getBrowser();
			document.getElementById("os").innerHTML = getOS();
			document.getElementById("ua").innerHTML = UA;
			document.getElementById("platform").innerHTML = getPlatform();
		} else {
			document.getElementById("error").innerHTML = "Browser info not detected.";
		}		
	}());

	function getBrowser() {
		var ua = window.navigator.userAgent.toLowerCase();
		
		var browser = "Unknown";
		var browserVersion = "";
		
		if (ua.indexOf("edge") > -1) {							// Edge / 12+
			browserVersion = ua.match(/edge\/\d+(.\d+)+/)[0].toString().substr(5);
			browser = "Microsoft Edge " + browserVersion;
		} else if (ua.indexOf("msie") > -1) {					// IE <= 10
			browserVersion = ua.match(/msie\s\d+/)[0].toString().substr(5);
			browser = "IE " + browserVersion;
		} else if (ua.indexOf("trident") > -1){					// IE 11 only have "Trident"
			browser = "IE 11";									// IE 8,9,10 have both "MSIE"&"Trident"
																// IE 6,7 only have "MSIE"

		} else if (ua.indexOf("firefox") > -1){					// Firefox
			browserVersion = ua.match(/firefox\/\d+(.\d+)+/)[0].toString().substr(8);
			if(ua.indexOf("mobile") > -1)
				browserVersion += " (mobile)";
			browser = "Firefox " + browserVersion;

		} else if (ua.indexOf("opera") > -1){					// Opera 9.8-
			browserVersion = ua.match(/opera\/\d+(.\d+)+/)[0].toString().substr(6);
			if(Number(browserVersion)>=9.8) {					// Opera 10+
				browserVersion = ua.match(/version\/\d+(.\d+)+/)[0].toString().substr(8);
			}
			if(ua.indexOf("mini") > -1) {						// Opera mini
				browserVersion = "mini " + ua.match(/mini\/\d+(.\d+)+/)[0].toString().substr(5);
			}
			browser = "Opera " + browserVersion;
		} else if (ua.indexOf("opr") > -1) {					// Opera with webkit/blink
			browserVersion = ua.match(/opr\/\d+.\d+.\d+.\d+/)[0].toString().substr(4);
			if (ua.indexOf("dev") > -1) {						// Opera dev edition
				browserVersion += " (edition developer)";
			} else if(ua.indexOf("beta") > -1) {				// Opera beta edition
				browserVersion += " (edition beta)";
			}
			if(ua.indexOf("mobile") > -1)
				browserVersion += " (mobile)";					// Opera Mobile
			browser = "Opera " + browserVersion;

		} else if (ua.indexOf("chrome") > -1){					// Chrome
			browserVersion = ua.match(/chrome\/\d+.\d+.\d+.\d+/)[0].toString().substr(7);
			if(ua.indexOf("mobile") > -1)
				browserVersion += " (mobile)";					// Chrome Mobile
			browser = "Chrome " + browserVersion;

		} else if (ua.indexOf("safari") > -1){					// Safari
			if((ua.indexOf("blackberry") > -1) || (ua.indexOf("bb10") > -1) || (ua.indexOf("playbook") > -1)) {
				var webkitVersion = ua.match(/webkit\/\d+(.\d+)+/)[0].toString().substr(7);
				browser = "BlackBerry built-in / Webkit " + webkitVersion;
			} else {
				browserVersion = ua.match(/safari\/\d+(.\d+)+/)[0].toString().substr(7);
				browser = "Safari " + browserVersion;
			}
		}

		browser = otherBrowserCheck(browser);
		return browser;
	}

	function getPlatform() {
		if (window.navigator.platform) {
			return window.navigator.platform;
		}
		return "Unknown";
	}

	function otherBrowserCheck(browser) {
		var ua = window.navigator.userAgent.toLowerCase();

		var browserVersion = "";
		var webkitVersion = "";
		var chromeVersion = "";

		// qqbrowser
		if (ua.indexOf("qqbrowser") > -1) {
			browserVersion = ua.match(/qqbrowser\/\d+(.\d+)+/)[0].toString().substr(10);
			if(ua.indexOf("mobile") > -1) {
				browserVersion += "(mobile)";
			}
			chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "QQ Browser " + browserVersion + " / Chrome " + chromeVersion;
		}

		// WeiXin
		if (ua.indexOf("micromessenger") > -1) {
			var weixinVersion = ua.match(/micromessenger\/\d+(.\d+)+/)[0].toString().substr(15);
			webkitVersion = ua.match(/webkit\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "WeiXin " + weixinVersion + " / wekit " + webkitVersion;
		}
		
		// QQ
		if (ua.indexOf("qq/") > -1) {
			var qqVersion = ua.match(/qq\/\d+(.\d+)+/)[0].toString().substr(3);
			webkitVersion = ua.match(/webkit\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "QQ " + qqVersion + " / wekit " + webkitVersion;
		}

		// XiaoMi MIUI Browser
		if (ua.indexOf("miui") > -1) {
			var qqVersion = ua.match(/browser\/\d+(.\d+)+/)[0].toString().substr(3);
			chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "XiaoMi MIUI Browser " + browserVersion + " / Chrome " + chromeVersion;
		}

		// UC
		if (ua.indexOf("ucbrowser") > -1 || ua.indexOf(" ubrowser") > -1) {
			browserVersion = ua.match(/browser\/\d+(.\d+)+/)[0].toString().substr(8);
			if(ua.indexOf("mobile") > -1) {
				browserVersion += " (mobile)";
				var uVersion = ua.match(/u\d\/\d+(.\d+)+/)[0].toString().substr(1).replace('/', ' ');
				browser = "UC Browser " + browserVersion + " / U" + uVersion;
			} else {
				if (ua.indexOf("chrome") > -1) {
					chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
					browser = "UC Browser " + browserVersion + " / Chrome " + chromeVersion;
				} else if (ua.indexOf("edge") > -1) {
					var ieVersion = ua.match(/edge\/\d+(.\d+)+/)[0].toString().substr(5);
					browser = "UC Browser " + browserVersion + " / edge " + ieVersion;
				} else if (ua.indexOf("msie") > -1) {
					var ieVersion = ua.match(/msie\s\d+/)[0].toString().substr(5);
					browser = "UC Browser " + browserVersion + " / IE " + ieVersion;
				} else if (ua.indexOf("trident") > -1){
					browser = "UC Browser " + browserVersion + " / IE 11";
				}
			}
		}

		// sougou
		if (ua.indexOf("sogou") > -1 || ua.indexOf(" se ") > -1) {
			if(ua.indexOf("mobile") > -1) {
				browserVersion = ua.match(/browser\/\d+(.\d+)+/)[0].toString().substr(8);
				browserVersion += " (mobile)";
				webkitVersion = ua.match(/webkit\/\d+(.\d+)+/)[0].toString().substr(7);
				browser = "Sogou Browser " + browserVersion + " / Webkit " + webkitVersion;
			} else {
				if (ua.indexOf("chrome") > -1) {
					chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
					browser = "Sogou Browser / Chrome " + chromeVersion;
				} else if (ua.indexOf("edge") > -1) {
					var ieVersion = ua.match(/edge\/\d+(.\d+)+/)[0].toString().substr(5);
					browser = "Sogou Browser / edge " + ieVersion;
				} else if (ua.indexOf("msie") > -1) {
					var ieVersion = ua.match(/msie\s\d+/)[0].toString().substr(5);
					browser = "Sogou Browser / IE " + ieVersion;
				} else if (ua.indexOf("trident") > -1){
					browser = "Sogou Browser / IE 11";
				}
			}
		}

		// 360 mobile (desktop is not special, refer to IE/Chrome)
		if (ua.indexOf("360 aphone browser") > -1) {
			browserVersion = ua.match(/browser\s\(\d+(.\d+)+\)/)[0].toString().slice(9, -1);
			if(ua.indexOf("mobile") > -1) {
				browserVersion += " (mobile)";
			}
			chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "360 Browser " + browserVersion + " / Chrome " + chromeVersion;
		}

		// liebao 
		if (ua.indexOf("lbbrowser") > -1) {
			chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "LieBao Browser / Chrome " + chromeVersion;
		}
		
		// liebao mobile
		if (ua.indexOf("liebao") > -1) {
			browserVersion = ua.match(/liebaofast\/\d+(.\d+)+/)[0].toString().substr(10);
			if(ua.indexOf("mobile") > -1) {
				browserVersion += " (mobile)";
			}
			chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "LieBao Fast Browser " + browserVersion + " / Chrome " + chromeVersion;
		}

		// baidu
		if (ua.indexOf("bidu") > -1) {
			if (ua.indexOf("chrome") > -1) {
				browserVersion = ua.match(/browser\/\d+(.\d+)+/)[0].toString().substr(8);
				chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
				browser = "Baidu Browser " + browserVersion + " / Chrome " + chromeVersion;
			} else if (ua.indexOf("edge") > -1) {
				browserVersion = ua.match(/browser\s\d+(.\d+)+/)[0].toString().substr(8);
				var ieVersion = ua.match(/edge\/\d+(.\d+)+/)[0].toString().substr(5);
				browser = "Baidu Browser " + browserVersion + " / edge " + ieVersion;
			} else if (ua.indexOf("msie") > -1) {
				browserVersion = ua.match(/browser\s\d+(.\d+)+/)[0].toString().substr(8);
				var ieVersion = ua.match(/msie\s\d+/)[0].toString().substr(5);
				browser = "Baidu Browser " + browserVersion + " / IE " + ieVersion;
			} else if (ua.indexOf("trident") > -1){
				browserVersion = ua.match(/browser\s\d+(.\d+)+/)[0].toString().substr(8);
				browser = "Baidu Browser " + browserVersion + " / IE 11";
			}
		}

		// baidu mobile
		if (ua.indexOf("baidu") > -1) {
			browserVersion = ua.match(/browser\/\d+(.\d+)+/)[0].toString().substr(8);
			if(ua.indexOf("mobile") > -1) {
				browserVersion += " (mobile)";
			}
			chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "Baidu Browser " + browserVersion + " / Chrome " + chromeVersion;
		}

		// maxthon
		if (ua.indexOf("maxthon") > -1) {
			browserVersion = ua.match(/maxthon\/\d+(.\d+)+/)[0].toString().substr(8);
			if(ua.indexOf("mobile") > -1) {
				browserVersion += " (mobile)";
			}
			chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "Maxthon " + browserVersion + " / Chrome " + chromeVersion;
		}

		// maxthon mobile
		if (ua.indexOf("mxbrowser") > -1) {
			browserVersion = ua.match(/mxbrowser\/\d+(.\d+)+/)[0].toString().substr(10);
			if(ua.indexOf("mobile") > -1) {
				browserVersion += " (mobile)";
			}
			chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "Maxthon " + browserVersion + " / Chrome " + chromeVersion;
		}

		// Dolphin
		if (ua.indexOf("dolphin") > -1) {
			browserVersion = ua.match(/dolphinbrowsercn\/\d+(.\d+)+/)[0].toString().substr(17);
			chromeVersion = ua.match(/chrome\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "Dolphin Browser " + browserVersion + " / Chrome " + chromeVersion;
		}

		// The World
		if (ua.indexOf("theworld") > -1) {
			browserVersion = ua.match(/theworld\s\d+/)[0].toString().substr(8);
			if(ua.indexOf("mobile") > -1) {
				browserVersion += " (mobile)";
			}
			chromeVersion = ua.match(/webkit\/\d+(.\d+)+/)[0].toString().substr(7);
			browser = "The World " + browserVersion + " / wekit " + chromeVersion;
		}

		return browser;
	}

	function getOS() {
		var os = "Unknown";
		if (window.navigator.userAgent && window.navigator.platform) {
		    var ua = window.navigator.userAgent.toLowerCase();
		    var platform = getPlatform();

		    var isWin   = (platform == "Win32")  || (platform == "Windows");
		    var isMac   = (platform == "Mac68K") || (platform == "MacPPC") || (platform == "Macintosh") || (platform == "MacIntel");
		    var isUnix  = (platform == "X11") && !isWin && !isMac;
		    var isLinux = (platform.toLowerCase().indexOf("linux") > -1) || (ua.indexOf("linux") > -1);

		    var isAndroid = ua.indexOf("android") > -1;
		    var isIPhone = ua.indexOf("iphone") > -1;
		    var isIPod = ua.indexOf("ipod") > -1;
		    var isIPad = ua.indexOf("ipad") > -1;
		    var isIOS = isIPhone || isIPad || isIPod;
		    var isWinPhone = ua.indexOf("windows phone") > -1;
		    var isXBox = ua.indexOf("xbox") > -1;
		    var isBlackBerry = (ua.indexOf("blackberry") > -1) || (ua.indexOf("bb10") > -1) || (ua.indexOf("playbook") > -1);
		    var isMeeGo = ua.indexOf("meego") > -1;
		    var isSymbian = ua.indexOf("symbian") > -1;

		    if (isMac)
		    	os = "Mac";
		    if (isUnix)
		    	os = "Unix";
		    if (isLinux && !isAndroid) {
		    	os = "Linux";
		    	if(ua.indexOf("kf")>-1) {
		    		os += "/Amazon Kindle";
		    	}
		    }
		    if (isWin) {
		        if (ua.indexOf("windows nt 5.0") > -1 || ua.indexOf("windows 2000") > -1)
		        	os = "Windows 2000";
		        if (ua.indexOf("windows nt 5.1") > -1 || ua.indexOf("windows xp") > -1)
		        	os = "Windows XP";
		        if (ua.indexOf("windows nt 5.2") > -1 || ua.indexOf("windows 2003") > -1)
		        	os = "Windows 2003";
		        if (ua.indexOf("windows nt 6.0") > -1 || ua.indexOf("windows Vista") > -1)
					os = "Windows Vista";
		        if (ua.indexOf("windows nt 6.1") > -1 || ua.indexOf("windows 7") > -1)
					os = "Windows 7";
				if (ua.indexOf("windows nt 6.2") > -1 || ua.indexOf("Windows 8") > -1)
					os = "Windows 8";
				if (ua.indexOf("windows nt 6.3") > -1 || ua.indexOf("windows 8.1") > -1)
					os = "Windows 8.1";
				if (ua.indexOf("windows nt 6.4") > -1 || ua.indexOf("windows nt 10.0") > -1 || ua.indexOf("windows 10") > -1)
					os = "Windows 10";
		    }
		    if (isAndroid) {
		    	os = "Android";
		    	var androidVersion = ua.match(/android\s\d+(.\d+)+/)[0].substr(8);
		    	if(androidVersion)
		    		os = os + " " + androidVersion[0];
		    }
		    if (isIOS) {
		    	var iosVersion = "";
		    	if(isIPhone) {
		    		var reg = /\d(\_\d)+/;
		    		var str = ua.substr(ua.indexOf("cpu iphone os")+14, 5);
		    		iosVersion = reg.exec(str)[0].replace(/\_/g, '.');
		    		os = "iOS " + iosVersion + " / iPhone"
				} else if (isIPad) {
		    		var reg = /\d(\_\d)+/;
		    		var str = ua.substr(ua.indexOf("cpu os")+6, 5);
		    		iosVersion = reg.exec(str)[0].replace(/\_/g, '.');
		    		os = "iOS " + iosVersion + " / iPad"
		    	} else if (isIPad) {
		    		var reg = /\d(\_\d)+/;
		    		var str = ua.substr(ua.indexOf("cpu iphone os")+6, 5);
		    		iosVersion = reg.exec(str)[0].replace(/\_/g, '.');
		    		os = "iOS " + iosVersion + " / iPod"
		    	} else {
		    		os = "iOS";
		    	}
		    }

		    if (isWinPhone) {
		    	var reg = /\d+(.\d)+/;
		    	var str = ua.substr(ua.indexOf("windows phone")+14, 7);
		    	var winPhoneVersion = reg.exec(str)[0];
		    	os = "Windows Phone " + winPhoneVersion;
		    }

		    if (isSymbian) {
		    	var series = ua.match(/series\d+/)[0].toString().substr(6);
		    	os = "Symbian S" + series;
		    }

		    if (isBlackBerry) {
		    	os = "BlackBerry";
		    	if (ua.indexOf("playbook") > -1) {
		    		os += " / PlayBook";
		    	} else if (ua.indexOf("bb10") > -1) {
		    		os += " / BB10";
		    	}
		    }

		    if (isXBox) {
		    	os = "XBox";
		    	if(ua.indexOf("xbox one") > -1) {
		    		os += " One";
		    	} else {
		    		os += " 360";
		    	}
		    }

		    if (isMeeGo) {
		    	os = "MeeGo";
		    }
		}
	    return os;
	}
	</script>
</body>
</html>