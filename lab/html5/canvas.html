<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
	<meta name="description" content="童话说，一个关于Web前端的原创技术博客，不定期发布Web前端及其相关技术的博文">
	<meta name="keywords" content="tonghuashuo,github,前端,html,html5,css,css3,javascript,js,jquery,安卓,android,java,童话,童话说,华心童">
	<title>Canvas - THS Lab</title>
	<link rel="stylesheet" href="../../css/index.css" />
	<link rel="stylesheet" type="text/css" href="../../css/lab.css">
</head>
<body>
    <div id="mf_content">
        <h1>Canvas</h1>
        <hr/>
        <h2 id="support"></h2>
        <canvas id="mycanvas" height="300" width="300" style="background-color:#DDD">Canvas is not supported on this browser</canvas>
        <hr/>
	    <a href="../../lab.html" class="back">&laquo; Back</a>
    </div>
    
    <script src="../../js/index.js"></script>
	<script>
	var canvas = document.getElementById("mycanvas");

	window.onload = draw;
	window.onresize = draw;

	function draw() {
		if(!canvas) {
			return false;
		} else {
			var win_w = window.innerWidth;
			var body = document.body;
			var pl = getCurrentStyle(body)["padding-left"].slice(0, -2);
			var pr = getCurrentStyle(body)["padding-right"].slice(0, -2);
			console.log(win_w + " " + pl + " " + pr);
			canvas.width = win_w - pl - pr;

			if(canvas.getContext("2d")) {
				support.innerHTML = "This browser supports canvas.";
				var ctx = canvas.getContext("2d");
				ctx.fillStyle = '#999'; 
		   		ctx.fillRect(100,100,canvas.width-200,100);   
		   	}
		}
	}
	
	function getCurrentStyle(node) {
	    var style = null;
	    
	    if(window.getComputedStyle) {
	        style = window.getComputedStyle(node, null);	// Not IE
	    }else{
	        style = node.currentStyle;	// IE
	    }
	    
	    return style;
	}
	</script>
</body>
</html>